
Функция ПолучитьСоответствияТарифов()
	
	результат = Новый Соответствие;
	
	#Область _00010101
	
	// 00010101 - общий
	тарифы = ПолучитьСтруктуруТарифа();
	
	тарифы.ОплатаЗаРейс = 100;
	тарифы.ОплатаЗаТРТ = 1;
	тарифы.ОплатаЗаВес = 0.1;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", Истина, Дата('00010101'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 0.4;
	тарифы.ОплатаЗаТРТ = 2;
	тарифы.ОплатаЗаВес = 0.1;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", Ложь, Дата('00010101'))), тарифы);
	
	#КонецОбласти
	
	#Область _20170327
	
	// 20170327 - общий
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 100;
	тарифы.ОплатаЗаТРТ = 2;
	тарифы.ОплатаЗаВес = 0.1;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", Истина, Дата('20170327'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 0.6;
	тарифы.ОплатаЗаТРТ = 3;
	тарифы.ОплатаЗаВес = 0.1;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", Ложь, Дата('20170327'))), тарифы);
	
	#КонецОбласти

	#Область _20180315
	
	// 20180315 - общий
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 130;
	тарифы.ОплатаЗаТРТ = 2;
	тарифы.ОплатаЗаВес = 0.1;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", Истина, Дата('20180315'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 0.8;
	тарифы.ОплатаЗаТРТ = 4;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", Ложь, Дата('20180315'))), тарифы);

	#КонецОбласти
	
	#Область _20180701
	
	//20180701 - общий
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 130;
	тарифы.ОплатаЗаТРТ = 2;
	тарифы.ОплатаЗаВес = 0.1;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Неопределено, Истина, Дата('20180701'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 0.8;
	тарифы.ОплатаЗаТРТ = 4;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Неопределено, Ложь, Дата('20180701'))), тарифы);

	//20180701 - Никополь
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 155;
	тарифы.ОплатаЗаТРТ = 3;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Справочники.СтруктурныеЕдиницы.НайтиПоКоду("000000004"), Истина, Дата('20180701'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 0.9;
	тарифы.ОплатаЗаТРТ = 5;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Справочники.СтруктурныеЕдиницы.НайтиПоКоду("000000004"), Ложь, Дата('20180701'))), тарифы);

	//20180701 - Кривой рог
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 165;
	тарифы.ОплатаЗаТРТ = 4;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Справочники.СтруктурныеЕдиницы.НайтиПоКоду("000000006"), Истина, Дата('20180701'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 1;
	тарифы.ОплатаЗаТРТ = 6;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Справочники.СтруктурныеЕдиницы.НайтиПоКоду("000000006"), Ложь, Дата('20180701'))), тарифы);
	
	#КонецОбласти
	
	#Область _20190527
	
	//20190527 - общий
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 165;
	тарифы.ОплатаЗаТРТ = 4;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Неопределено, Истина, Дата('20190527'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаКМ = 1;
	тарифы.ОплатаЗаТРТ = 6;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Неопределено, Ложь, Дата('20190527'))), тарифы);

	//20190527 - Кривой рог
	тарифы = ПолучитьСтруктуруТарифа();
	
	
	тарифы.ОплатаЗаРейс = 165+45;
	тарифы.ОплатаЗаТРТ = 4;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Справочники.СтруктурныеЕдиницы.НайтиПоКоду("000000006"), Истина, Дата('20190527'))), тарифы);
	
	тарифы = ПолучитьСтруктуруТарифа();

	тарифы.ОплатаЗаРейс = 45;
	тарифы.ОплатаЗаКМ = 1;
	тарифы.ОплатаЗаТРТ = 6;
	тарифы.ОплатаЗаВес = 0.11;
	
	результат.Вставить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", Справочники.СтруктурныеЕдиницы.НайтиПоКоду("000000006"), Ложь, Дата('20190527'))), тарифы);
		
	#КонецОбласти
	
	Возврат результат;
	
КонецФункции

функция ПолучитьСтруктуруТарифа()
	Возврат Новый Структура("ОплатаЗаКМ,ОплатаЗаРейс,ОплатаЗаТРТ,ОплатаЗаВес",0,0,0,0);
КонецФункции

Функция ПолучитьТарифыПоПодразделению(подразделение, пробег, датаСреза) Экспорт
	
	соТарифыПоПодразделениям = ПолучитьСоответствияТарифов();
	
	Если НачалоДня(датаСреза) >= Дата('20190527') Тогда
		
		этоГород = ?(пробег <= 150, Истина, Ложь);
		
		Если подразделение.Код = "000000006" Тогда
			мПодразделение = подразделение;
		Иначе
			мПодразделение = Неопределено;
		КонецЕсли;
		
		результат = соТарифыПоПодразделениям.Получить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", мПодразделение, этоГород, Дата('20190527'))));

	ИначеЕсли НачалоДня(датаСреза) >= Дата('20180701') Тогда
		
		этоГород = ?(пробег <= 150, Истина, Ложь);
		
		Если подразделение.Код = "000000004" Или подразделение.Код = "000000006" Тогда
			мПодразделение = подразделение;
		Иначе
			мПодразделение = Неопределено;
		КонецЕсли;
		
		результат = соТарифыПоПодразделениям.Получить(ЗначениеВСтрокуВнутр(Новый Структура("Подразделение,ЭтоГород,Период", мПодразделение, этоГород, Дата('20180701'))));
		
		
	ИначеЕсли НачалоДня(датаСреза) >= Дата('20180315') Тогда
		
		этоГород = ?(пробег <= 150, Истина, Ложь);
		
		результат = соТарифыПоПодразделениям.Получить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", этоГород, Дата('20180315'))));
		
	ИначеЕсли НачалоДня(датаСреза) >= Дата('20170327') Тогда
		
		этоГород = ?(пробег <= 150, Истина, Ложь);
		
		результат = соТарифыПоПодразделениям.Получить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", этоГород, Дата('20170327'))));
		
	Иначе
		
		этоГород = ?(пробег <= 200, Истина, Ложь);
		
		результат = соТарифыПоПодразделениям.Получить(ЗначениеВСтрокуВнутр(Новый Структура("ЭтоГород,Период", этоГород, Дата('00010101'))));
		
	КонецЕсли;
	
	Возврат результат;
	
КонецФункции