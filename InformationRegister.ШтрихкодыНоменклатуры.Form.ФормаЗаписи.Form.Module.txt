// Формирует штрихкод EAN13.
//
&НаСервереБезКонтекста
Функция СформироватьШтрихкодEAN13()
	
	Возврат РегистрыСведений.ШтрихкодыНоменклатуры.СформироватьШтрихкодEAN13();
	
КонецФункции // СформироватьШтрихкодEAN13()

//// ПодключаемоеОборудование
//&НаКлиенте
//Функция ПолученыШтрихкоды(ДанныеШтрикодов)
//	
//	Модифицированность = Истина;
//	
//	Если ДанныеШтрикодов.Количество() > 0 Тогда
//		Запись.Штрихкод = ДанныеШтрикодов[ДанныеШтрикодов.Количество() - 1].Штрихкод;
//	КонецЕсли;
//	
//	Возврат Истина;
//	
//КонецФункции // ПолученыШтрихкоды()
//// Конец ПодключаемоеОборудование

// Процедура обработчик команды НовыйШтрихкод.
//
&НаКлиенте
Процедура НовыйШтрихкод(Команда)
	
	Запись.Штрихкод = СформироватьШтрихкодEAN13(); 
	
КонецПроцедуры // НовыйШтрихкод()


//// Процедура - обработчик события ПриЗакрытии.
////
//&НаКлиенте
//Процедура ПриЗакрытии()
//	
//	// ПодключаемоеОборудование
//	ПоддерживаемыеТипыВО = Новый Массив();
//	ПоддерживаемыеТипыВО.Добавить("СканерШтрихкода");
//	
//	МенеджерОборудованияКлиент.ОтключитьОборудованиеПоТипу(УникальныйИдентификатор, ПоддерживаемыеТипыВО);
//	// Конец ПодключаемоеОборудование
//	
//КонецПроцедуры // ПриЗакрытии()

//// Процедура - обработчик события ОбработкаОповещения.
////
//&НаКлиенте
//Процедура ОбработкаОповещения(ИмяСобытия, Параметр, Источник)
//	
//	// ПодключаемоеОборудование
//	Если Источник = "ПодключаемоеОборудование"
//	   И ВводДоступен() Тогда
//		Если ИмяСобытия = "ScanData" Тогда
//			//Преобразуем предварительно к ожидаемому формату
//			Данные = Новый Массив();
//			Если Параметр[1] = Неопределено Тогда
//				Данные.Добавить(Новый Структура("Штрихкод, Количество", Параметр[0], 1)); // Достаем штрихкод из основных данных
//			Иначе
//				Данные.Добавить(Новый Структура("Штрихкод, Количество", Параметр[1][1], 1)); // Достаем штрихкод из дополнительных данных
//			КонецЕсли;

//			ПолученыШтрихкоды(Данные);
//		ИначеЕсли ИмяСобытия = "DataCollectionTerminal" Тогда
//			ПолученыШтрихкоды(Параметр);
//		КонецЕсли;
//	КонецЕсли;
//	// Конец ПодключаемоеОборудование
//	
//КонецПроцедуры // ОбработкаОповещения()

//// Процедура - обработчик события ПриОткрытии.
////
//&НаКлиенте
//Процедура ПриОткрытии(Отказ)
//	
//	// ПодключаемоеОборудование
//	Если ИспользоватьПодключаемоеОборудование // Проверка на включенную ФО "Использовать ВО"
//	   И МенеджерОборудованияКлиент.ОбновитьРабочееМестоКлиента() Тогда // Проверка на определенность рабочего места ВО
//		ОписаниеОшибки = "";
//		
//		ПоддерживаемыеТипыВО = Новый Массив();
//		ПоддерживаемыеТипыВО.Добавить("СканерШтрихкода");
//		
//		Если Не МенеджерОборудованияКлиент.ПодключитьОборудованиеПоТипу(УникальныйИдентификатор, ПоддерживаемыеТипыВО, ОписаниеОшибки) Тогда
//			ТекстСообщения = НСтр("ru = 'При подключении оборудования произошла ошибка:
//			                      |""%ОписаниеОшибки%"".'");
//			ТекстСообщения = СтрЗаменить(ТекстСообщения, "%ОписаниеОшибки%", ОписаниеОшибки);
//			ОбщегоНазначенияКлиентСервер.СообщитьПользователю(ТекстСообщения);
//		КонецЕсли;
//	КонецЕсли;
//	// Конец ПодключаемоеОборудование
//	
//КонецПроцедуры // ПриОткрытии()

//// Процедура - обработчик события ОбработкаПроверкиЗаполненияНаСервере.
////
//&НаСервере
//Процедура ОбработкаПроверкиЗаполненияНаСервере(Отказ, ПроверяемыеРеквизиты)
//	
//	Запрос = Новый Запрос;
//	Запрос.Текст = 
//	"ВЫБРАТЬ ПЕРВЫЕ 1
//	|	ШтрихкодыНоменклатуры.Штрихкод,
//	|	ШтрихкодыНоменклатуры.Номенклатура,
//	|	ШтрихкодыНоменклатуры.Характеристика,
//	|	ШтрихкодыНоменклатуры.Партия,
//	|	ПРЕДСТАВЛЕНИЕ(ШтрихкодыНоменклатуры.Номенклатура) КАК НоменклатураПредставление,
//	|	ПРЕДСТАВЛЕНИЕ(ШтрихкодыНоменклатуры.Характеристика) КАК ХарактеристикаПредставление,
//	|	ПРЕДСТАВЛЕНИЕ(ШтрихкодыНоменклатуры.Партия) КАК ПартияПредставление
//	|ИЗ
//	|	РегистрСведений.ШтрихкодыНоменклатуры КАК ШтрихкодыНоменклатуры
//	|ГДЕ
//	|	ШтрихкодыНоменклатуры.Штрихкод = &Штрихкод";
//	
//	Запрос.УстановитьПараметр("Штрихкод", Запись.Штрихкод);
//	
//	Выборка = Запрос.Выполнить().Выбрать();
//	
//	Если Выборка.Следующий() // Штрихкод уже записан в БД
//	   И Запись.ИсходныйКлючЗаписи.Штрихкод <> Запись.Штрихкод Тогда
//		
//		ОписаниеОшибки = НСтр("ru='Такой штрихкод уже назначен для номенклатуры %Номенклатура%'");
//		ОписаниеОшибки = СтрЗаменить(ОписаниеОшибки, "%Номенклатура%", """" + Выборка.НоменклатураПредставление + """"
//		                + ?(ЗначениеЗаполнено(Выборка.Характеристика), " " + НСтр("ru='с характеристикой'") + " """ + Выборка.ХарактеристикаПредставление + """", "")
//		                + ?(ЗначениеЗаполнено(Выборка.Партия), " """ + НСтр("ru='с партией'") + " " + Выборка.ПартияПредставление + """", ""));
//		
//		Сообщение = Новый СообщениеПользователю;
//		Сообщение.Текст = ОписаниеОшибки;
//		Сообщение.Поле = "Запись.Штрихкод";
//		Сообщение.Сообщить();
//		Отказ = Истина;
//		
//	КонецЕсли;
//	
//КонецПроцедуры // ОбработкаПроверкиЗаполненияНаСервере()