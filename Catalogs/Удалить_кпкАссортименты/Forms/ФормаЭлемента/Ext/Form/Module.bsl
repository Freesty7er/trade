
&НаКлиенте
Процедура ТАссортиментНоменклатураОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	
	Если ТипЗнч(ВыбранноеЗначение) = Тип("СправочникСсылка.Номенклатура") Тогда
		
		Если Объект.ТАссортимент.НайтиСтроки(Новый Структура("Номенклатура", ВыбранноеЗначение)).Количество() > 0 Тогда
			СтандартнаяОбработка = Ложь;
			Предупреждение(НСтр("ru = 'Номенклатура уже присутствует в списке'"));
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ДобавитьНоменклатуруВСписок(Номенклатура)
	
	НоваяСтрока = Объект.ТАссортимент.Добавить();
	НоваяСтрока.Номенклатура = Номенклатура;
	
КонецПроцедуры

&НаКлиенте
Процедура Подбор(Команда)
	
	ВладелецФормы = Элементы.ТАссортимент;
	
	ПараметрыФормы = Новый Структура;
	ПараметрыФормы.Вставить("РежимВыбора", Истина);
	ПараметрыФормы.Вставить("ЗакрыватьПриВыборе", Ложь);
	
	ОткрытьФормуМодально("Справочник.Номенклатура.ФормаВыбора", ПараметрыФормы, ВладелецФормы);
	
КонецПроцедуры

&НаКлиенте
Процедура ТАссортиментОбработкаВыбора(Элемент, ВыбранноеЗначение, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;

	Если ТипЗнч(ВыбранноеЗначение) = Тип("СправочникСсылка.Номенклатура") Тогда
		
		Если Объект.ТАссортимент.НайтиСтроки(Новый Структура("Номенклатура", ВыбранноеЗначение)).Количество() = 0 Тогда
			ДобавитьНоменклатуруВСписок(ВыбранноеЗначение);	
		Иначе
			Предупреждение(НСтр("ru = 'Номенклатура уже присутствует в списке'"));
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры
