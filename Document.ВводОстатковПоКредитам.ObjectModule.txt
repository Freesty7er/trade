#Область ОбработчикиСобытий

Процедура ОбработкаПроведения(отказ, режимПроведения)
	
	Кредиты = Движения.ВзаиморасчетыПоВыданнымКредитам;
	
	Для Каждого СтрокаСостава Из Состав Цикл
		
		Движение = Кредиты.Добавить();
		Движение.Период			= Дата;
		Движение.ВидДвижения 	= ВидДвиженияНакопления.Приход;
		Движение.Подразделение	= Подразделение;
		Движение.Сотрудник		= СтрокаСостава.Сотрудник;
		Движение.Сумма 			= СтрокаСостава.Результат;
		Движение.СчетУчета		= ПланыСчетов.Внутренний.КредитыИЗаймы;
		
	КонецЦикла;
	
	Кредиты.Записать();
	
	
КонецПроцедуры

Процедура ПередЗаписью(отказ, режимЗаписи, режимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Подразделение.Пустая() Тогда
		
		ТекстСообщения = НСтр("ru = 'Запись невозможна без заполнения Подразделения.'");
		ПроверкаДанныхКлиентСервер.СообщитьОбОшибке(отказ, текстСообщения, ЭтотОбъект, "Подразделение");
		
	КонецЕсли;
	
КонецПроцедуры

Процедура ПриКопировании(объектКопирования)
	
	ЗаполнениеОбъектовСервер.ЗаполнитьДанныеСкопированногоДокумента(ЭтотОбъект, ОбъектКопирования);
	
КонецПроцедуры

#КонецОбласти 