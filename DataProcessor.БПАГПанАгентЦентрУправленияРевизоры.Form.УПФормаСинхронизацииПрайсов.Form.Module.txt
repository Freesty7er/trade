
&НаКлиенте
Процедура ТаблицаБПАГПрайсыНачалоПеретаскивания(Элемент, ПараметрыПеретаскивания, Выполнение)
	// Вставить содержимое обработчика.
	СтандартнаяОбработка = Ложь;
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаБПАГПрайсыПеретаскивание(Элемент, ПараметрыПеретаскивания, СтандартнаяОбработка, Строка, Поле)	
	ПеретаскиваемыеЗначения = ПараметрыПеретаскивания.Значение;
	
	Если ТипЗнч(ПеретаскиваемыеЗначения) = Тип("Массив") Тогда
		Для Каждого Перетаскиваемое Из ПеретаскиваемыеЗначения Цикл
			ОбновитьОбъект(Перетаскиваемое);
		КонецЦикла;
	КонецЕсли;
КонецПроцедуры


&НаКлиенте
Процедура ТаблицаБПАГПрайсыПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
	// Вставить содержимое обработчика.
	//Форма = ПолучитьФорму("Обработка.БПАГПанАгентЦентрУправления.Форма.УПФормаСклада");
	//Форма.Открыть();
КонецПроцедуры

Процедура ОбновитьОбъект(Ссылка)
	Если Ссылка.ПометкаУдаления Тогда
		Возврат;
	КонецЕсли;
	
	СуществующийЭлемент = Справочники.БПАГПрайсы.НайтиПоРеквизиту("ТипЦен", Ссылка);
	Если СуществующийЭлемент = Справочники.БПАГПрайсы.ПустаяСсылка() Тогда
		НовыйОбъект = Справочники.БПАГПрайсы.СоздатьЭлемент();
		НовыйОбъект.ТипЦен = Ссылка;
		НовыйОбъект.Наименование = Ссылка.Наименование;
		НовыйОбъект.Записать();
	Иначе
		Если СуществующийЭлемент.Наименование <> Ссылка.Наименование Тогда
			ОтладочноеСообщениеУП("Прайс, соответствующий типу цен """ + Ссылка.Наименование + """ уже есть в справочнике! Название: " + СуществующийЭлемент.Наименование + ".");
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Процедура ОтладочноеСообщениеУП(Текст)
    НашОбъект = РеквизитФормыВЗначение("Объект");
   	НашОбъект.ОтладочноеСообщение(Текст);
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	СпецификаПользователя = БПАГ.ПолучитьСпецификуПользователя();
	Если СпецификаПользователя = "SD" Тогда
		СписокТиповЦен.ОсновнаяТаблица = "Справочник.ТипыЦен";	
    Иначе
		СписокТиповЦен.ОсновнаяТаблица = ?(БПАГ.ПолучитьВидПрикладногоРешения() = "УТ10", "Справочник.ТипыЦен", "Справочник.ВидыЦен");
	КонецЕсли;
КонецПроцедуры



