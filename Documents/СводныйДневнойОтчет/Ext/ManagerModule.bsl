// Инициализирует таблицы значений, содержащие данные табличных частей документа.
// Таблицы значений сохраняет в свойствах структуры "ДополнительныеСвойства"..
//
Процедура ИнициализироватьДанныеДокумента(документСсылка, структураДополнительныеСвойства) Экспорт
	
	запрос = Новый Запрос;
	запрос.МенеджерВременныхТаблиц = структураДополнительныеСвойства.ДляПроведения.СтруктураВременныеТаблицы.МенеджерВременныхТаблиц;
	
	#Область ТекстЗапроса
	
	// Назначение запросов:
	//	0 - Временная таблица "РеквизитыДокумента". Значения реквизитов документа для использования в движениях документа.
	//	1 - Временная таблица "РозничнаяВыручка". 
	//	2 - Временная таблица "ПартииТоваровНаСкладах". 
	//  3 - Временная таблица "ФинансовыйРезультат"
	
	запрос.Текст =
	"ВЫБРАТЬ
	|	СводныйДневнойОтчетСостав.Ссылка,
	|	СводныйДневнойОтчетСостав.Ссылка.Дата КАК Период,
	|	СводныйДневнойОтчетСостав.Ссылка.Подразделение,
	|	СводныйДневнойОтчетСостав.ЦФО,
	|	СводныйДневнойОтчетСостав.ОплатаБонусами,
	|	СводныйДневнойОтчетСостав.Скидка,
	|	СводныйДневнойОтчетСостав.СписаниеРеализованнаяСтоимость,
	|	СводныйДневнойОтчетСостав.СписаниеРеализованнаяПродСтоимость,
	|	СводныйДневнойОтчетСостав.СписаниеОтклонениеОтОстаткаСтоимость,
	|	СводныйДневнойОтчетСостав.СписаниеОтклонениеОтОстаткаПродСтоимость,
	|	ВалютаУчета.Значение КАК Валюта,
	|	СводныйДневнойОтчетСостав.Недостачи КАК ОтраженныйМаржинальныйДоход
	|ПОМЕСТИТЬ РеквизитыДокумента
	|ИЗ
	|	Документ.СводныйДневнойОтчет.Состав КАК СводныйДневнойОтчетСостав,
	|	Константа.ВалютаУчета КАК ВалютаУчета
	|ГДЕ
	|	СводныйДневнойОтчетСостав.Ссылка = &Ссылка
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	РеквизитыДокумента.ОплатаБонусами КАК Сумма,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Затраты) КАК КорСчет
	|ПОМЕСТИТЬ ВременнаяТаблицаРозничнаяВыручка
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	РеквизитыДокумента.ОплатаБонусами <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	РеквизитыДокумента.СписаниеРеализованнаяСтоимость,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Товары)
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	РеквизитыДокумента.СписаниеРеализованнаяСтоимость <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Приход),
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	РеквизитыДокумента.ОтраженныйМаржинальныйДоход,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Доходы)
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	РеквизитыДокумента.ОтраженныйМаржинальныйДоход <> 0
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход) КАК ВидДвижения,
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	РеквизитыДокумента.ЦФО.Склад КАК Склад,
	|	РеквизитыДокумента.СписаниеРеализованнаяСтоимость КАК Стоимость,
	|	РеквизитыДокумента.СписаниеРеализованнаяПродСтоимость КАК ПродСтоимость,
	|	РеквизитыДокумента.СписаниеРеализованнаяСтоимость КАК СтоимостьВал,
	|	РеквизитыДокумента.Валюта,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыХраненияЗапасов.НаСкладе) КАК ВидХранения,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Товары) КАК СчетУчета,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Инкассация) КАК КорСчет
	|ПОМЕСТИТЬ ВременнаяТаблицаПартииТоваровНаСкладах
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	(РеквизитыДокумента.СписаниеРеализованнаяСтоимость <> 0
	|			ИЛИ РеквизитыДокумента.СписаниеРеализованнаяПродСтоимость <> 0)
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход),
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	РеквизитыДокумента.ЦФО.Склад,
	|	РеквизитыДокумента.СписаниеОтклонениеОтОстаткаСтоимость,
	|	РеквизитыДокумента.СписаниеОтклонениеОтОстаткаПродСтоимость,
	|	РеквизитыДокумента.СписаниеОтклонениеОтОстаткаСтоимость,
	|	РеквизитыДокумента.Валюта,
	|	ЗНАЧЕНИЕ(Перечисление.ВидыХраненияЗапасов.НаСкладе),
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Товары),
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Затраты)
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	(РеквизитыДокумента.СписаниеОтклонениеОтОстаткаСтоимость <> 0
	|			ИЛИ РеквизитыДокумента.СписаниеОтклонениеОтОстаткаПродСтоимость <> 0)
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО КАК Объект,
	|	ЗНАЧЕНИЕ(Справочник.СтатьиДоходов.МаржинальныйДоход) КАК СтатьяДоходов,
	|	РеквизитыДокумента.СписаниеРеализованнаяПродСтоимость - РеквизитыДокумента.СписаниеРеализованнаяСтоимость - РеквизитыДокумента.ОтраженныйМаржинальныйДоход КАК СуммаДоходов,
	|	НЕОПРЕДЕЛЕНО КАК СтатьяЗатрат,
	|	0 КАК СуммаРасходов,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Инкассация) КАК КорСчет
	|ПОМЕСТИТЬ ВременнаяТаблицаФинансовыйРезультат
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	РеквизитыДокумента.СписаниеРеализованнаяПродСтоимость - РеквизитыДокумента.СписаниеРеализованнаяСтоимость - РеквизитыДокумента.ОтраженныйМаржинальныйДоход <> 0
	|	И ЛОЖЬ
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	ЗНАЧЕНИЕ(Справочник.СтатьиДоходов.Переоценка),
	|	-РеквизитыДокумента.СписаниеОтклонениеОтОстаткаСтоимость,
	|	НЕОПРЕДЕЛЕНО,
	|	0,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Товары)
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	РеквизитыДокумента.СписаниеОтклонениеОтОстаткаСтоимость <> 0
	|
	|ОБЪЕДИНИТЬ ВСЕ
	|
	|ВЫБРАТЬ
	|	РеквизитыДокумента.Период,
	|	РеквизитыДокумента.Подразделение,
	|	РеквизитыДокумента.ЦФО,
	|	НЕОПРЕДЕЛЕНО,
	|	0,
	|	ЗНАЧЕНИЕ(Справочник.СтатьиЗатрат.ПрочиеРасходы),
	|	РеквизитыДокумента.ОплатаБонусами,
	|	ЗНАЧЕНИЕ(ПланСчетов.Внутренний.Инкассация)
	|ИЗ
	|	РеквизитыДокумента КАК РеквизитыДокумента
	|ГДЕ
	|	РеквизитыДокумента.ОплатаБонусами <> 0";
	
	#КонецОбласти
	
	запрос.УстановитьПараметр("Ссылка", документСсылка);
	запрос.УстановитьПараметр("МоментВремени", Новый Граница(структураДополнительныеСвойства.ДляПроведения.МоментВремени, ВидГраницы.Включая));
	
	запрос.ВыполнитьПакет();
	
	#Область ПросмотрВременныхТаблиц
	
	запрос.Текст = "ВЫБРАТЬ * ИЗ РеквизитыДокумента";
	
	запрос.Текст = "ВЫБРАТЬ * ИЗ ВременнаяТаблицаРозничнаяВыручка";
	запрос.Текст = "ВЫБРАТЬ * ИЗ ВременнаяТаблицаФинансовыйРезультат";
	запрос.Текст = "ВЫБРАТЬ * ИЗ ВременнаяТаблицаПартииТоваровНаСкладах";
	
	#КонецОбласти
	
КонецПроцедуры // ИнициализироватьДанныеДокумента()