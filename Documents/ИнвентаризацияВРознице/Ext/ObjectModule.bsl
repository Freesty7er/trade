#Область ОбработчикиСобытий

Процедура ОбработкаПроведения(отказ, режимПроведения)
	
	Движения.ТоварыВРознице.Записывать = Истина;
	
	мДвижения = Документы.ИнвентаризацияВРознице.СформироватьТаблицыДляПроведения(Ссылка);
	
	Движения.ТоварыВРознице.Загрузить(мДвижения[1].Выгрузить());

	
КонецПроцедуры

Процедура ПередЗаписью(отказ, режимЗаписи, режимПроведения)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Если Подразделение.Пустая() Тогда
		
		ТекстСообщения = НСтр("ru = 'Запись невозможна без заполнения Подразделения.'");
		ПроверкаДанныхКлиентСервер.СообщитьОбОшибке(отказ, текстСообщения, ЭтотОбъект, "Подразделение");
		
	КонецЕсли;
	
	Если Не Дата = КонецДня(Дата) Тогда
		Дата = КонецДня(Дата);
	КонецЕсли;
	
	УстановитьВремя(РежимАвтоВремя.Последним);

	
	СуммаДокумента = Состав.Итог("СуммаИзлишек") - Состав.Итог("СуммаНедостача");
	
КонецПроцедуры

Процедура ПриКопировании(объектКопирования)
	
	ЗаполнениеОбъектовСервер.ЗаполнитьДанныеСкопированногоДокумента(ЭтотОбъект, объектКопирования);
	
КонецПроцедуры

#КонецОбласти 