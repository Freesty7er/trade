#Область ОбработчикиСобытий

&НаКлиенте
Процедура ОперацияДокументаПриИзменении(Элемент)
	
	УстановитьСвойстваЭлементовФормы(ЭтотОбъект);

КонецПроцедуры

//	Переделать на асинхронный вызов
//
&НаКлиенте
Процедура КредДокументНачалоВыбора(элемент, данныеВыбора, стандартнаяОбработка)
	
	стандартнаяОбработка = Ложь;
	
	структураПараметров = Новый Структура("Подразделение, ОкончаниеПериода, Контрагент", Объект.Подразделение, Объект.Дата, Объект.Контрагент);
	
	ОткрытьФорму("ОбщаяФорма.ФормаПодбораДолгов", структураПараметров, ЭтаФорма,,,,,РежимОткрытияОкнаФормы.БлокироватьОкноВладельца);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(отказ, стандартнаяОбработка)
	
	ТолькоПросмотр = Объект.СозданАвтоматически;
	
	//Если Параметры.Ключ.Пустая() Тогда
	//	УстановитьСвойстваЭлементовФормы(ЭтотОбъект);
	//КонецЕсли; 
	
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(текущийОбъект)
	
	//УстановитьСвойстваЭлементовФормы(ЭтотОбъект);
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаВыбора(выбранноеЗначение, источникВыбора)
	
	типВыбранногоЗначения = ТипЗнч(выбранноеЗначение);
	
	Если типВыбранногоЗначения = Тип("Структура") Тогда
		
		обработкаВыбораДолгов = Неопределено;
		Если выбранноеЗначение.Свойство("ОбработкаВыбораДолгов", обработкаВыбораДолгов) И обработкаВыбораДолгов Тогда
			Объект.КредДокумент = выбранноеЗначение.КредДокумент;
			Объект.СуммаДокумента = выбранноеЗначение.Долг;
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ДополнительныеПроцедурыИФункции

&НаКлиенте
Процедура УстановитьСвойстваЭлементовФормы(форма)
	
	//Для Каждого значениеВыбора Из форма.Элементы.ОперацияДокумента.СписокВыбора Цикл
	//	Если форма.Элементы["Страница"+значениеВыбора.Значение.ИмяПредопределенныхДанных].Видимость Тогда
	//		форма.Элементы["Страница"+значениеВыбора.Значение.ИмяПредопределенныхДанных].Видимость = Ложь;
	//	КонецЕсли;
	//КонецЦикла;
	//
	//форма.Элементы["Страница"+форма.Объект.ОперацияДокумента.ИмяПредопределенныхДанных].Видимость = Истина;
	
	соСтраницы = ПолучитьСоответсвияСтраницНаСервере();
	Для Каждого КлючИЗначение Из соСтраницы Цикл
		форма.Элементы[КлючИЗначение.Ключ].Видимость = КлючИЗначение.Значение;
	КонецЦикла;
	
КонецПроцедуры	// УстановитьСвойстваЭлементовФормы()

&НаСервере
Функция ПолучитьСоответсвияСтраницНаСервере()
	
	результат = Новый Соответствие;
	
	Для Каждого значениеВыбора Из Элементы.ОперацияДокумента.СписокВыбора Цикл
		результат.Вставить("Страница"+значениеВыбора.Значение.ИмяПредопределенныхДанных, Ложь);
	КонецЦикла;
	
	результат.Вставить("Страница"+Объект.ОперацияДокумента.ИмяПредопределенныхДанных, Истина);
	
	Возврат результат;
	
КонецФункции

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	УстановитьСвойстваЭлементовФормы(ЭтотОбъект);
КонецПроцедуры

#КонецОбласти