
Функция ПолучитьСтруктуруПараметровПоВидуНоменклатуры()
	
	результат = Новый Структура;
	
	Для Каждого ресурс Из Метаданные.РегистрыСведений.ПараметрыУчетаПоВидамНоменклатуры.Ресурсы Цикл
		результат.Вставить(ресурс.Имя);
	КонецЦикла;
	
	Возврат результат;
	
КонецФункции

Функция ПолучитьПараметрыУчетаПоВидуНоменклатуры(датаСреза, подразделение, сПараметры = Неопределено) Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	Если сПараметры = Неопределено Тогда
		сПараметры = ПолучитьСтруктуруПараметровПоВидуНоменклатуры();
	КонецЕсли;
	
	запрос = Новый Запрос;
	
	#Область ТекстЗапроса
	
	запрос.Текст =
	"ВЫБРАТЬ *
	|	
	|ИЗ
	|	РегистрСведений.ПараметрыУчетаПоПодразделениям.СрезПоследних(&ДатаСреза, СтруктурнаяЕдиница = &Подразделение) КАК ПараметрыУчетаПоПодразделениямСрезПоследних";
	
	#КонецОбласти
	
	запрос.УстановитьПараметр("ДатаСреза", датаСреза);
	//запрос.УстановитьПараметр("Подразделение", подразделение);
	
	результатЗапроса = запрос.Выполнить();
	Если Не результатЗапроса.Пустой() Тогда
		ЗаполнитьЗначенияСвойств(сПараметры, результатЗапроса.Выгрузить()[0]);
	КонецЕсли;
	
	
	
	Возврат сПараметры;
	
КонецФункции