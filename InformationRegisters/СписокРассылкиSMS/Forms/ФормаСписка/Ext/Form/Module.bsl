
#Область ДействияКоманд

&НаКлиенте
Процедура Настройки(Команда)
	ОткрытьФорму("РегистрСведений.СписокРассылкиSMS.Форма.Настройки");
КонецПроцедуры

&НаСервереБезКонтекста
Функция КомандаПолучитьБалансНаСервере()
	
	SMSCUAОбъект = Обработки.SMSCUA.Создать();
	SMSCUAОбъект.SMSC_LOGIN 	= Константы.ИмяПользователяSMSCUA.Получить();
	SMSCUAОбъект.SMSC_PASSWORD 	= Константы.ПарольПользователяSMSCUA.Получить();
	SMSCUAОбъект.SMSC_HTTPS 	= 0;
	SMSCUAОбъект.SMSC_DEBUG 	= ?(Константы.РежимОтладкиSMSCUA.Получить(), 1, 0);
	
	ответ = SMSCUAОбъект.ПолучитьБаланс();
	
	Возврат (ответ);

КонецФункции

&НаКлиенте
Процедура КомандаПолучитьБаланс(Команда)
	
	ответ = КомандаПолучитьБалансНаСервере();
	
	текстСообщения = НСтр(СтрШаблон("ru = 'Баланс счёта: %1 грн'", ответ));
	
	ПоказатьПредупреждение(Неопределено, текстСообщения);
	
КонецПроцедуры

#КонецОбласти
